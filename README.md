# Реализация кэш-менеджеров CRUD-операций в Mongo DB

Реализация бэкенда с REST API, выполняющего CRUD-операции по коллекциям Автор, Книга, Аватар. 
С применением паттерна "Репозиторий" описаны CRUD-операции по сущностям в базе данных Mongo DB.
Использован паттерн "Декоратор" для обертки классов-репозиториев и выполнения операций записи, получения и удаления записей в кэше.
Кэширование операций реализовано:
- с использованием хранилища в Redis (CACHE=redis)
- с использованием хранилища в оперативной памяти (CACHE=memory)

Реализованы запросы:

1) Создание автора и книг.

2) Получение списка авторов, со вложенными в него книгами и возможностью фильтрации по id и имени автора.

3) Получение книги по ее id и информации об её авторе с возможностью фильтрации по названию книги.

4) Получение аватара автора по id автора или id аватара.

5) Создание аватара у автора книги.

6) Обновление информации об авторе.

7) Обновление информации о книге.

8) Удаление автора по его id, со списком его книг.

9) Удаление книги по ее id.


## Используемые технологии
Бэкенд: python3.10, asyncio, FastApi, motor, aioredis

БД: mongo, redis

Линтеры: isort, flake8

## Настройка проекта

Проект настраивается через переменные окружения, указанные в файле src/.env

Пример .env файла указан в .env.example:

| Ключ                         | Значение                           | По умолчанию      |
|------------------------------|------------------------------------|-------------------|
| `APP_HOST`                   | Хост приложения                    | `0.0.0.0`         |
| `APP_PORT`                   | Порт приложения                    | `8000`            |
| `APP_WORKERS`                | Количество воркеров                | `1`               |
| `DEBUG`                      | Режим дебага                       | `False`           |
| `RELOAD`                     | Режим автоперезагрузки             | `False`           |
| `MONGO_INITDB_DATABASE`      | Имя БД                             | `app`             |
| `MONGO_INITDB_ROOT_USERNAME` | Пользователь БД                    | `admin`           |
| `MONGO_INITDB_ROOT_PASSWORD` | Пароль пользователя БД             | `admin`           |
| `MONGO_HOST`                 | Адрес СУБД                         | `db`              |
| `MONGO_PORT`                 | Порт СУБД                          | `27017`           |
| `CACHE`                      | Менеджер кэша                      | `default` (redis) |
| `APP_PROXY_PORT`             | Порт контейнера с бэкендом         | `8000`            |
| `APP_PROXY_LINK`             | Наименование контейнера с бэкендом | `app`             |


## Запуск проекта:

В корне проекта запустить команду:

`docker-compose -f docker-compose.yml up --build -d`

Доступ к сваггеру по адресу: `127.0.0.1:8000/docs`

